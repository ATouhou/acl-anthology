{"sections":[{"title":"Netgrap–MaingSearcinginTreebansEasy JiříMírovsý CharlesniersityinPrague FacultyofMathematicsandPhysics InstituteofFormalandAppliedLinguistics Malostranskénám.25,11800Prague1,CzechRepublic mirovskufl.mff.cuni.cz 1 Introduction","paragraphs":["Searchinginalinguisticallyannotatedtreebankis aprincipaltaskthatrequires asophisticated tool. Netgraphhasbeendesignedtoperformthesearchingwithmaximumcomfortandminimumrequire- mentsonitsusers.Althoughithasbeendeeloped primarilyforthePragueDependencyTreebank2.0 (Hajičetal.2006),itcanbeusedwithothertreebankstoo,bothdependencyandconstituent-structuretypes,aslongasthetreebankistransformedto asuitableformat.","In this paper, we present Netgraph query languageandonmanyexamplesshowhowitcanbe usedtosearchforfrequentlinguisticphenomena.","Insection(afterthisintroduction)weextremely briefly describe the Prague Dependency Treebank2.0,justtomaketheexamplesinthesubsequenttextmoreunderstandable.Inthenextsubsection we mention the history of Netgraph and its propertiesasatool.","In section 2 we offer an introduction to the querylanguageofNetgraphalongwiththeideaof meta-attributes and what they are good for, and present linguistically motiated examples of queriesinthePragueDependencyTreebank.","Finally,in section3 weoffersomeconcluding remarks. 1.1 PragueDependencyTreeban2.0 The Prague Dependency Treebank 2.0 (PDT2.0, seeHajičetal.2006,Hajič2004)isamanuallyannotated corpus of Czech. It is a sequel to the PragueDependency Treebank1.0(PDT1.0, see Hajičetal.2001a,Hajičetal.2001b).","ThetextsinPDT2.0areannotatedonthreelayers-themorphologicallayer,theanalyticallayer andthetectogrammaticallayer. Thecorpussizeis almost2milliontokens(115thousandsentences), although “only” 0.8 million tokens (49 thousand sentences)areannotatedonallthreelayers.By'tokens'wemeanwordforms,includingnumbersand punctuationmarks.","Onthemorphologicallayer(Hanaetal.2005), eachtoken ofeery sentenceisannotated witha lemma(attributem/lemm),keepingthebaseform ofthetoken,andatag(attribute m/tg),keeping its morphological information. Sentence boundariesareannotatedhere,too.","Theanalyticallayerroughlycorrespondstothe surfacesyntaxofthesentence;theannotationisa single-rooted dependency tree withlabeled nodes (Hajičetal.1997,Hajič1998).Attributefundescribesthetypeofdependency between adependentnodeanditsgoernor.Thenodesontheanalyticallayer(exceptfortechnicalrootsofthetrees) alsocorrespond1:1tothetokensofthesentences. The order of the nodes from left to right correspondsexactlytothesurfaceorderoftokensinthe sentence(attribute ord).Non-projectieconstructions (thatare quite frequent both inCzech (Hajičoá et al. 2004) and in some other languages (seeHaelka2007))areallowed.","Thetectogrammaticallayercapturesthelinguisticmeaningofthesentenceinitscontext.Again, the annotation is a dependency tree with labeled nodes(seeHajičoá1998).Thecorrespondenceof thenodestothelowerlayersismorecomplexhere. Itisoftennot1:1,itcanbeboth1:NandN:1.It wasshownindetailinMíroský(2006)howNetgraphdealswiththisissue.","Attribute functor describes the dependency betweenadependentnodeanditsgoernor.Atec-"]},{"title":"945","paragraphs":["togrammaticallemma(attribute t_lemm)isassignedtoeerynode.Grammatemes,whichkeep additionalannotation,arerendered asasetof16 attributes grouped by the “prefix” grm (e.g. grm/verbmodforerbalmodality).","Topic and focus (Hajičoá et al. 1998) are marked (attribute tf), together with so-called deepwordorderreflectedbytheorderofnodesin theannotation(attributedeepord).","Coreferencerelationsbetween nodesofcertain categorytypesarecaptured(Kučoáetal.2003), distinguishingalsothetypeoftherelation(textual orgrammatical). Eachnodehasanidentifier (attribute id) that is unique throughout the whole corpus. Attributes coref_text.rf and coref_grm.rf contain ids of coreferential nodesoftherespectietypes. 1.2 NetgrapasaTool ThedeelopmentofNetgraphstartedin1998asa topic of Ondruška's Master's thesis (Ondruška 1998),andhasbeenproceedingalongwiththeongoingannotationsofthePragueDependencyTree- bank 1.0 and later the Prague Dependency Treebank2.0.NowitisafullyfunctionaltoolforcomplexsearchinginPDT2.0andothertreebanks.","Netgraph is a client-serer application that allowsmultipleuserstosearchthetreebankon-line andsimultaneouslythroughtheInternet.Theserer(writteninC)searchesthetreebank,whichislocatedatthesamecomputerorlocalnetwork.The client(writteninJaa2)seresasaerycomfortablegraphicaluserinterfaceandcanbelocatedat anynodeintheInternet.Theclientexistsintwo forms:asanappletandasastand-aloneapplication.TheappletersioncanberunfromNetgraph home page and searches in PDT 2.0. The standalone ersion can be downloaded from the same page and can connect anonymously to PDT 2.0 serer. More information can be found on Netgraph home page (http://quest.ms.mff.cuni.cz/netgraph).","Theclientsendsuserqueriestothesererand receies results from it. Both the serer and the clientalsocan,ofcourse,resideatthesamecomputer.Authenticationbythemeansofloginnames andpasswordsisproided.serscanhaearious accesspermissions.","Adetailed descriptionoftheinnerarchitecture ofNetgraphandofthecommunicationbetweenthe serer andtheclientwasgieninMíroský,OndruškaandPrůša(2002).","NetgraphsererrequiresthetreebankinFSformat, encoded in TF-8. A formal description of theformatcanbefoundinHajičetal.2001a.Netgraph query language, presented in the next section,isanextensionofFSformat."]},{"title":"2 NetgrapQueryLanguage","paragraphs":["InthissectionwegieanintroductiontoNetgraph querylanguage.Weshowonaseriesofexamples how some frequent linguistic phenomena can be searchedfor. 2.1 TeQueryIsaTree ThequeryinNetgraphisatreethatformsasubtree intheresulttrees.Thetreebankissearchedtreeby treeandwheneerthequeryisfoundasasubtree ofatree(wesaythequeryandthetreematch),the treebecomespartoftheresult.Theresultisdisplayedtreebytreeondemand.Thequerycanalso consistofseeraltreesjoinedeitherbyANDorOR relation.Inthatcase,allthequerytreesatthesame time(oratleastoneofthequerytrees,respectiely)arerequiredtomatchtheresulttree.","Thequeryhasbothatextualformandagraphicalform.Inthefollowingtext,wewilluseitstextualformforsimplequeriesanditsgraphicalform (orbothforms)formoreadancedqueries.","Thesyntaxofthelanguageiserysimple.Inthe textual form, square brackets enclose a node, attributes (pairs nme=vlue)are separated by a comma,quotationmarksenclosearegularexpressioninaalue.Parenthesesencloseasubtreeofa node,brothersareseparatedbyacomma.Inmultiple-treequeries,eachtreeisonanewlineandthe firstlinecontainsonlyasingleANDorOR.Alternatie alues of an attribute, as well as alternatie nodes, are separated by a ertical bar. It almost completesthedescriptionofthesyntax,onlyone thing (references) will beadded in the following subsection.","Thesimplestpossiblequery(andprobablyoflittleinterestonitself)isasimplenodewithoutany ealuation: [].Itmatchesallnodesofalltreesin thetreebank,eachtreeasmanytimesashowmany nodesthereareinthetree.Neertheless,wemay add conditions on its attributes, optionally using regularexpressionsinaluesoftheattributes.Thus"]},{"title":"946","paragraphs":["wemaysearche.g.forallnodesthatareSubjects andnounsbutnotinfirstcase:","[fun=Sb, m/tg=\"N...[1̂].*\"l].","Wemaynoticeherethatregularexpressionsallow the first (ery basic) type of negation in queries.","Moreinterestingqueriesusuallyconsistofseeralnodes,formingatreestructure.Thefollowing example query searches for trees containing a Predicate that directly goerns a Subject and an Object:","[fun=Pred]([fun=Sb],[fun=Oblj]).","Please note that there is no condition in the queryontheorderoftheSubjectandtheObject, nor on their left-right position to their father. It does not preent other nodes to be directly goernedbythePredicateeither. 2.2 Meta-Attributes This simple query language, described briefly in onlyafewexamples,isquiteusefulbutnotpowerful enough. There is no possibility to set a real negation,nowayofrestrictingthepositionofthe queryintheresulttreeorthesizeoftheresulttree, northeorderofnodescanbecontrolled.Toallow these and other things, meta-attributes hae been addedtothequerysystem.","Meta-attributesarenotpresentinthecorpusbut theypretendtobeordinaryattributesandtheuser uses them the same way like normal attributes. Their names start with an underscore. There are eleenmeta-attributes,eachaddingsomepowerto thequerylanguage,enhancingitssemantics,while keeping the syntax of the language on the same simple leel. We present seeral of the meta-attributesinthissubsection,someotherswillbepresented in the subsequent section, when they are needed. A detailed description of the principal meta-attributeswasgieninMíroský(2006).","Coordinationisafrequentphenomenoninlanguages.InPDT(andinmostothertreebanks,too) itisrepresentedbyacoordinatingnode.Tobeable toskip(andeffectielyignore)thecoordinationin thequeries,wehaeintroducedthemeta-attribute _optionl that marks an optional node. The nodethenmaybutdoesnothaetobeintheresult. If we are interested, for example, in Predicates goerningObjects,wecangetbothcases(withcoordinationandwithoutit)inonequeryusingthis meta-attribute: [fun=Pred]([fun=Coord,_opltionl=1]([fun=Obj])).","TheCoordinationbecomesoptional.Ifthereisa nodebetween thePredicateanditsObjectinthe resulttree,ithastobetheCoordination.Butthe ObjectmayalsobeadirectsonofthePredicate, omitting the optional Coordination. The picture demonstrates that the graphical representation of the query is much more comprehensible than its textualersion:","There is a group of meta-attributes of rather technicalnature,whichallowsettingapositionof thequeryintheresulttree,restrictingthesizeof theresulttreeoritspart,andrestrictingnumberof directsonsofanode.Metaattribute_depthcontrolsthedistanceofanodefromtheroot(useful whensearchingforaphenomenoninsubordinated clauses,for example), _#descendnts controls numberofnodesinthesubtreeofanode(useful e.g.whensearchingfor„nice“smallexamplesof something), _#sons controls number of (direct) sonsofanode.","Controllingnumberofdirectsons(mainlyinits negatiesense)isimportantforstudyingalency ofwords(HajičoáandPaneoá1984).Thefollowingexamplesearchesonthetectogrammatical layerofPDT.WewantaPredicatethatgoernsdirectlyanActorandaPatientandnothingelse(directly):","[functor=PRED,_#sons=2]([funlc-","tor=ACT],[functor=PAT]). Thegraphicalrepresentationofthequeryis:","If we replaced PAT with ADDR, we might searchforerrorsintheealuation,sincethetheory"]},{"title":"947","paragraphs":["forbidsActorandAddresseebeingtheonlyparts ofaalencyframe.","Sofar,wecouldonlyrestrictnumberofnodes. Butweoftenwanttorestrictapresenceofacertain typeofnode.Wewanttospecifythatthereisnota nodeofacertainquality.Forexample,wemight wanttosearch(againonthetectogrammaticallayer) for an Effect without an Origo in a alency frame.Themeta-attributethatallowsthisrealtype ofnegationiscalled_#occurrences.Itcontrols theexactnumberofoccurrencesofacertaintype ofnode,inourexampleofOrigos:","[functor=PRED]([functor=EFFl],","[functor=ORIG,_#occurrencles=0]) withgraphicalrepresentation:","ItsaysthatthePredicatehasatleastoneson– anEffect,andthatthePredicatedoesnothaean Origoson.","Thereisstilloneimportantthingthatwecannot achieewiththemeta-attributes presented sofar. Wecannotsetanyrelation(otherthandependency)betweennodesintheresulttrees(suchasorder,agreementincase,coreference). Allthiscan bedoneusingthemeta-attribute_nmeandasystemofreferences.Themeta-attribute nme simplynamesanodeforalaterreferencefromother nodes.","Curlybracketsencloseareferencetoaalueof anattributeoftheothernode(withagienname) intheresulttree.This,alongwiththedot-referencinginsidethereferenceandsomearithmeticpossi- bilities,completesourdescriptionofthesyntaxof thequerylanguagefromsubsection2.1. Inthe following example(backon the analytical layerandknowingthatattributeordkeepstheorderofthenodes(~tokens)inthetree(~sentence)) fromlefttoright,wesearchforaSubjectthatison therightsidefromanObject(inthetreeandalso inthesentence):","[fun=Pred]","([fun=Sb,ord>{N1.ord}],","[fun=Obj,_nme=N1]) withgraphicalrepresentation:","WehaenamedtheObjectnode N1 andspecifiedthatordoftheSubjectnodeshouldbebigger than ord of the N1 node. If we used ord>{N1.ord}+5,wewouldrequirethemtobe atleastfiewordsapart.","Meta-attribute _#lbrothers (_#rbrothers) containsnumberofleft(right)brothersofaparticular nodeintheresulttree.Thus,wecandefinethata node(e.g.anAttribute)istheleftmostsonofanothernode(e.g.anObject):","[fun=Obj]([fun=Atr,_#lbroth-","ers=0]). Meta-attribute _trnsitive defines atransitie edge. The following example searches for a erb node that goerns transitiely another erb node: [m/tg=\"V.*\"]([m/tg=\"V.*\",_trlnsitive=true]). Ifwedonotwantthemtobedirectfatherand son,wehaetwopossibilities:Eitherweputanothernodewithoutanyealuationinbetweenthem inthequery:","[m/tg=\"V.*\"]([]([m/tg=\"V.*\",","_trnsitive=true])) withgraphicalrepresentation: or,wecanusemeta-attribute_depthandrefer-","ences: [m/tg=\"V.*\",_nme=N1] ([m/tg=\"V.*\",_trnsitivel=true, _depth>{N1._depth}+1]) which is perhaps a little bit more complex. The graphicalrepresentationofthequeryis:"]},{"title":"948 ","paragraphs":["singseeralmeta-attributes inonequery can","form a powerful combination. The following ex-","amplesearchesfortherightmostlistdescendantof","aPredicate: [fun=Pred]([_trnsitivel=true, _#sons=0,_nme=N1],[_trnslitive=true,_#sons=0, ord>{N1.ord},_#occurrenlces=0]) withgraphicalrepresentation: :","ThefirsttransitiedescendantofthePredicateis thelist(_#sons=0)wearelookingfor.Thesecondtransitiedescendantisalistthatwedonot wanttobeintheresult(withhigher ord).There-fore,weset_#occurrencestozero."]},{"title":"3 Conclusion","paragraphs":["We hae presented Netgraph query language, its basics and also its adanced techniques, namely meta-attributes,referencesandtheircombination.","Wehaedemonstratedthatmanylinguisticphenomenacanbesearchedforusingthislanguage.It can be shown (Míroský 2008) that Netgraph queryingpoweroutperformsthequeryingpowerof TGrep (Pito 1994), which is a traditional (and nowadays outdated) treebank searching tool. On the other hand, itseems (it has not been studied thoroughly yet) that Netgraph has slightly lesser searching power than TGrep2 (Rohde 2005), which can use any boolean combination of its searchingpatterns. AcnowledgementTheresearchreportedinthis paperwassupported bytheGrantAgencyofthe Academy of Sciences of the Czech Republic, projectIS-REST(No.1ET101120413)."]},{"title":"References","paragraphs":["HajičJ.etal.2006.PragueDependencyTreebank2.0. CD-ROMLDC2006T0,LDC,Philadelphia,2006.","HajičJ.2004.ComplexCorpusAnnotation:ThePrague DependencyTreebank.JazykovednýústavĹ.Štúra, SAV,Bratislava,2004.","HajičJ.,Vidoá-HladkáB.,PaneoáJ.,HajičoáE., SgallP.,PajasP.2001a.PragueDependencyTreebank 1.0 (Final Production Label). CD-ROM LD-C200T0,LDC,Philadelphia,200.","Hajič J., Pajas P. and Vidoá-Hladká B. 2001b. The PragueDependencyTreebank:AnnotationStructure and Support. In IRCS Workshop on Linguistic databases,200,pp.05-4.","Hana J., Zeman D., Hajič J., Hanoá H., Hladká B., JeřábekE.2005.ManualforMorphologicalAnnotation,ReisionforPDT2.0.ÚFALTechnicalReport TR-2005-27,CharlesUniversityinPrague,2005.","HajičJ.etal.1997.AManualforAnalyticLayerTagging of the Prague Dependency Treebank. ÚFAL TechnicalReportTR-997-03,CharlesUniversityin Prague,997.","HajičJ.1998.BuildingaSyntacticallyAnnotatedCorpus:ThePragueDependencyTreebank.InIssuesof ValencyandMeaning,Karolinum,Praha998,pp. 06-32.","HajičoáE.,HaelkaJ.,SgallP.,VeseláK.,ZemanD. 2004.IssuesofProjectiityinthePragueDependencyTreebank.MFFUK,Prague,8,2004.","Haelka J. 2007. Beyond Projectiity: Multilingual EaluationofConstraintsandMeasuresonNon-Projectie Structures. In Proceedings of ACL 2007, Prague,pp.608-65.","HajičoáE.1998.PragueDependencyTreebank:From analytic to tectogrammatical annotations. In: Proceedingsof2ndTST,Brno,Springer-VerlagBerlin HeidelbergNewYork,998,pp.45-50.","HajičoáE,PaneoáJ.1984.Valency(case)frames. InP.Sgall(ed.):ContributionstoFunctionalSyntax, Semantics and Language Comprehension, Prague, Academia,984,pp.47-88.","MíroskýJ.2006.Netgraph: a Tool forSearchingin PragueDependencyTreebank2.0.InProceedingsof TLT2006,Prague,pp.2-222."]},{"title":"949","paragraphs":["HajičoáE.,ParteeB.,SgallP.1998.Topic-FocusArticulation, Tripartite Structures and Semantic Content.Dordrecht,Amsterdam,KluwerAcademicPublishers,998.","Kučoá L., Kolářoá-Řezníčkoá V., Žabokrtský Z., Pajas P., Čulo O. 2003. Anotoání koreference Pražském záislostním korpusu. ÚFAL Technical Report TR-2003-9, Charles University in Prague, 2003.","OndruškaR.1998.ToolsforSearchinginSyntactically AnnotatedCorpora. MasterThesis,CharlesUniversityinPrague,998.","Míroský J., Ondruška R., Průša D. 2002. Searching throughPragueDependencyTreebank-Conception andArchitecture.InProceedingsofTheFirstWorkshoponTreebanksandLinguisticTheories,Sozopol, 2002,pp.4--22.","MíroskýJ.:NetgraphHomePage:http://quest.ms.mff.- cuni.cz/netgraph","MíroskýJ.2008.TowardsaSimpleandFull-Featured TreebankQueryLanguage. InProceedingsofFirst InternationalConferenceonGlobalInteroperability forLanguageResources,HongKong,2008,inprint.","Pito R. 1994. TGrep Manual Page. Available from http://www.ldc.upenn.edu/ldc/online/treebank/","RohdeD.2005.TGrep2serManual. Availablefrom http://www-cgi.cs.cmu.edu/~dr/TGrep2/tgrep2.pdf"]},{"title":"950","paragraphs":[]}]}